document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("searchInput"),t=document.getElementById("freeMode"),n=document.getElementById("categoryFilter"),o=document.getElementById("toolsList"),i=document.getElementById("pagination"),a=document.getElementById("bookmarksList");let r=[],s=1,d=5;fetch("tools.json").then(e=>{if(!e.ok)throw new Error("Gagal memuat tools.json");return e.json()}).then(e=>{r=e;const t=new Set(r.map(e=>e.category));n.innerHTML='<option value="">All Categories</option>'+Array.from(t).map(e=>`<option value="${e}">${e}</option>`).join(""),c()}).catch(e=>{o.innerHTML='<p class="error">Error: Gagal memuat data alat AI.</p>',console.error(e)});function c(){o.innerHTML="",a.innerHTML="";const e=l(),t=r.filter(e=>!n.value||e.category===n.value).filter(e=>e.name.toLowerCase().includes(l().toLowerCase())||e.description.toLowerCase().includes(l().toLowerCase())),n=Math.ceil(t.length/d);let c=(s-1)*d,d=c+d>d*t.length?t.length:c+d;t.slice(c,d).forEach(e=>{const t=document.createElement("div");t.classList.add("tool-card");const n=localStorage.getItem("bookmarks")?.split(",").includes(e.id);t.innerHTML=`<img src="logo.png" alt="${e.name} Icon" class="tool-icon"><span class="tool-name">${e.name} - ${e.description.substring(0,20)}...</span><span class="tool-category">${e.category}</span><span class="tool-check">${n?"⭐":"✅"}</span>`,t.addEventListener("click",()=>{!n&&u(e.id)}),o.appendChild(t)});const r=localStorage.getItem("bookmarks")?.split(",").filter(e=>e).map(e=>r.find(t=>t.id===e));r.forEach(e=>{const t=document.createElement("div");t.classList.add("tool-card"),t.innerHTML=`<img src="logo.png" alt="${e.name} Icon" class="tool-icon"><span class="tool-name">${e.name} - ${e.description.substring(0,20)}...</span><span class="tool-category">${e.category}</span><span class="tool-check">⭐</span>`,a.appendChild(t)}),i.innerHTML="",Array.from({length:n},(e,t)=>t+1).forEach(e=>{const t=document.createElement("button");t.textContent=e,t.addEventListener("click",()=>{(s=e)>1&&t.classList.add("active"),c()}),i.appendChild(t)}),s>1&&i.firstChild.classList.add("active")}function l(){return e.value||""}e.addEventListener("input",c),n.addEventListener("change",c),t.addEventListener("change",()=>{console.log("Free mode:",t.checked)}),function(){const e=localStorage.getItem("bookmarks");e&&c()}()});function u(e){let t=localStorage.getItem("bookmarks")?.split(",")??[];t.includes(e)?t=t.filter(t=>t!==e):(t.push(e),t=t.filter(e=>e)),localStorage.setItem("bookmarks",t),c()}
